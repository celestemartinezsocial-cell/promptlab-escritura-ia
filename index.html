

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromptLab - Escritura con IA</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Montserrat', sans-serif; }
        body { background: linear-gradient(to bottom right, #FFF5EE, #F5F5F5); min-height: 100vh; }
        .container { max-width: 1024px; margin: 0 auto; padding: 24px; }
        .card { background: white; border-radius: 12px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); padding: 32px; margin-bottom: 24px; }
        .logo-container { display: flex; align-items: center; gap: 16px; margin-bottom: 8px; }
        .logo { height: 60px; width: auto; }
        .btn-primary { background: #FF7A00; color: white; padding: 16px 24px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; width: 100%; font-size: 16px; }
        .btn-primary:hover:not(:disabled) { opacity: 0.9; }
        .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-secondary { background: #E8E9E9; color: #4A4A4A; padding: 12px 24px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; }
        .input-field, .textarea-field, select { width: 100%; padding: 12px; border: 2px solid #E8E9E9; border-radius: 8px; font-size: 14px; font-family: 'Montserrat', sans-serif; }
        .input-field:focus, .textarea-field:focus, select:focus { outline: none; border-color: #FF7A00; }
        .textarea-field { min-height: 96px; resize: vertical; }
        .label { display: block; font-weight: 600; font-size: 14px; color: #374151; margin-bottom: 8px; }
        .helper-text { font-size: 12px; color: #8A8B8C; margin-top: 4px; }
        .content-btn { padding: 12px; border: 2px solid #E8E9E9; border-radius: 8px; background: white; cursor: pointer; text-align: center; }
        .content-btn.active { border-color: #FF7A00; background: #FFF5EE; }
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        .space-y-4 > * + * { margin-top: 16px; }
        .space-y-6 > * + * { margin-top: 24px; }
        .alert { padding: 16px; border-left: 4px solid; border-radius: 8px; font-size: 14px; margin-bottom: 16px; }
        .alert-blue { background: #EFF6FF; border-color: #3B82F6; color: #1E3A8A; }
        .alert-green { background: #F0FDF4; border-color: #22C55E; color: #166534; }
        .alert-orange { background: #FFF7ED; border-color: #F59E0B; color: #92400E; }
        .alert-purple { background: #FAF5FF; border-color: #A855F7; color: #6B21A8; }
        .alert-pink { background: #FCE7F3; border-color: #EC4899; color: #831843; }
        .response-box { background: white; border: 1px solid #E8E9E9; border-radius: 8px; padding: 16px; max-height: 300px; overflow-y: auto; white-space: pre-wrap; font-size: 14px; }
        .step-indicator { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 14px; }
        .progress-line { flex: 1; height: 4px; margin: 0 8px; }
        .animate-spin { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @media (max-width: 768px) { .grid-2, .grid-4 { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        const App = () => {
            const [step, setStep] = useState(0);
            const [data, setData] = useState({
                contentType: '', 
                docSubtype: '',
                socialSubtype: '',
                topic: '', 
                purpose: '', 
                audience: '', 
                tone: '', 
                length: '',
                format: '', 
                examples: '', 
                constraints: ''
            });
            const [resp1, setResp1] = useState('');
            const [resp2, setResp2] = useState('');
            const [ref, setRef] = useState({ worked: '', notWorked: '', change: '' });
            const [finalRef, setFinalRef] = useState({ better: '', tone: '', bigChange: '', learning: '' });
            const [loading, setLoading] = useState(false);

            const types = [
                { id: 'email', label: 'Correo/Mensaje', emoji: 'üìß' },
                { id: 'report', label: 'Informe', emoji: 'üìä' },
                { id: 'presentation', label: 'Presentaci√≥n', emoji: 'üìΩÔ∏è' },
                { id: 'proposal', label: 'Propuesta', emoji: 'üíº' },
                { id: 'documentation', label: 'Documentaci√≥n', emoji: 'üìù', hasSubtypes: true },
                { id: 'article', label: 'Art√≠culo/Blog', emoji: '‚úçÔ∏è' },
                { id: 'social', label: 'Redes Sociales', emoji: 'üì±', hasSubtypes: true }
            ];

            const docSubtypes = [
                'Manual de Usuario',
                'Gu√≠a T√©cnica',
                'Procedimiento (SOP)',
                'Pol√≠tica Interna',
                'Resumen Ejecutivo'
            ];

            const socialSubtypes = {
                'Facebook': 'En Facebook, prioriza un tono conversacional que fomente la conexi√≥n personal y el sentido de comunidad. Evita estructuras que parezcan anuncios publicitarios directos; en su lugar, enf√≥cate en contar una historia o compartir valor de forma genuina.',
                'Instagram': 'En Instagram, el contenido debe ser visualmente descriptivo y directo. Prioriza un inicio impactante (gancho) y utiliza p√°rrafos muy cortos o listas. La IA debe entender que el texto acompa√±a a una imagen o video, por lo que debe ser est√©tico y f√°cil de leer de un vistazo.',
                'LinkedIn': 'En LinkedIn, el tono debe ser profesional pero humano (aut√©ntico). El enfoque debe estar en compartir una lecci√≥n aprendida, un dato relevante o una reflexi√≥n de valor para la industria. Evita el lenguaje demasiado informal o "clich√©"; busca que el autor suene como un experto confiable.',
                'TikTok': 'Para TikTok, el texto debe funcionar como un guion de ritmo r√°pido. La instrucci√≥n es ser extremadamente conciso, usar un lenguaje coloquial y din√°mico. La IA debe enfocarse en entregar la informaci√≥n m√°s importante de inmediato para evitar que el usuario deslice hacia abajo.'
            };

            const purposes = [
                'Informar/Educar', 'Persuadir/Convencer', 'Inspirar/Motivar',
                'Anunciar/Actualizar', 'Solicitar/Proponer', 'Documentar/Registrar'
            ];

            const tones = [
                'Profesional', 'Casual/Conversacional', 'Formal',
                'Amigable', 'Autoritario', 'Emp√°tico'
            ];

            const steps = ['Construir', 'Probar & Analizar', 'Mejorar', 'Comparar & Aprender'];

            const update = (k, v) => {
                setData(prev => {
                    const newData = { ...prev, [k]: v };
                    // Reset subtypes when changing main type
                    if (k === 'contentType') {
                        newData.docSubtype = '';
                        newData.socialSubtype = '';
                    }
                    return newData;
                });
            };

            const buildPrompt = () => {
                let p = '';
                let typeLabel = '';
                
                if (data.contentType) {
                    const t = types.find(x => x.id === data.contentType);
                    
                    if (data.contentType === 'documentation' && data.docSubtype) {
                        typeLabel = data.docSubtype;
                    } else if (data.contentType === 'social' && data.socialSubtype) {
                        typeLabel = `publicaci√≥n para ${data.socialSubtype}`;
                    } else {
                        typeLabel = t.label.toLowerCase();
                    }
                    
                    p = `Escribe ${typeLabel}`;
                }
                
                if (data.topic) p += ` sobre ${data.topic}`;
                p += '.';
                
                // Add social media best practice if applicable
                if (data.contentType === 'social' && data.socialSubtype) {
                    p += `\n\nIMPORTANTE - Best Practice de ${data.socialSubtype}:\n${socialSubtypes[data.socialSubtype]}`;
                }
                
                const d = [];
                if (data.purpose) d.push(`Prop√≥sito: ${data.purpose}`);
                if (data.audience) d.push(`Audiencia: ${data.audience}`);
                if (data.tone) d.push(`Tono: ${data.tone}`);
                if (data.length) d.push(`Extensi√≥n: ${data.length}`);
                if (d.length > 0) p += '\n\n' + d.join('\n');
                
                if (data.format) p += `\n\nFormato: ${data.format}`;
                if (data.examples) p += `\n\nEstilo: ${data.examples}`;
                if (data.constraints) p += `\n\nRequisitos: ${data.constraints}`;
                
                // Add anti-fluff instructions
                p += `\n\n[ESTILO CR√çTICO]: S√© directo y aut√©ntico. NO uses frases clich√© como "en el mundo de hoy", "es fundamental", "cabe destacar". NO uses lenguaje corporativo vac√≠o. Escribe como un humano real, no como un robot. Prioriza claridad sobre elegancia.`;
                
                return p.trim();
            };

            const generate = async (isRevised) => {
                setLoading(true);
                try {
                    const res = await fetch("https://api.anthropic.com/v1/messages", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            model: "claude-sonnet-4-20250514",
                            max_tokens: 1500,
                            messages: [{ role: "user", content: buildPrompt() }]
                        })
                    });
                    const json = await res.json();
                    const text = json.content?.find(i => i.type === "text")?.text || "Respuesta generada";
                    isRevised ? setResp2(text) : setResp1(text);
                } catch (e) {
                    const err = "Error al generar. Intenta de nuevo.";
                    isRevised ? setResp2(err) : setResp1(err);
                } finally {
                    setLoading(false);
                }
            };

            const copy = (text) => {
                navigator.clipboard.writeText(text);
                alert('Copiado');
            };

            const exportData = () => {
                const content = `PROYECTO PROMPTLAB\n\nPROMPT INICIAL:\n${buildPrompt()}\n\nRESPUESTA 1:\n${resp1}\n\nREFLEXI√ìN:\n${ref.worked}\n${ref.notWorked}\n${ref.change}\n\nPROMPT MEJORADO:\n${buildPrompt()}\n\nRESPUESTA 2:\n${resp2}\n\nAPRENDIZAJES:\n${finalRef.learning}`;
                const blob = new Blob([content], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'promptlab-proyecto.txt';
                a.click();
            };

            return (
                <div className="container">
                    <div className="card">
                        <div className="logo-container">
                            <img 
                                src="https://drive.google.com/uc?export=view&id=19f65r51VGnQ15ha0B06_Qh8ARzvqM9XQ" 
                                alt="Logo" 
                                className="logo"
                            />
                            <div>
                                <h1 style={{fontSize: '30px', fontWeight: 700, color: '#FF7A00', marginBottom: '4px'}}>
                                    PromptLab - Escritura con IA
                                </h1>
                                <p style={{color: '#8A8B8C'}}>Obt√©n mejores resultados de IA con prompts bien dise√±ados</p>
                            </div>
                        </div>
                    </div>

                    <div className="card">
                        <div style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between'}}>
                            {steps.map((label, i) => (
                                <React.Fragment key={i}>
                                    <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center', flex: 1}}>
                                        <div className="step-indicator" style={{
                                            backgroundColor: i === step ? '#FF7A00' : i < step ? '#FFA347' : '#E8E9E9',
                                            color: i <= step ? 'white' : '#9CA3AF'
                                        }}>
                                            {i + 1}
                                        </div>
                                        <div style={{
                                            fontSize: '12px', marginTop: '4px', textAlign: 'center',
                                            fontWeight: i === step ? 600 : 400,
                                            color: i === step ? '#FF7A00' : '#8A8B8C'
                                        }}>
                                            {label}
                                        </div>
                                    </div>
                                    {i < 3 && <div className="progress-line" style={{
                                        backgroundColor: i < step ? '#FFA347' : '#E8E9E9'
                                    }} />}
                                </React.Fragment>
                            ))}
                        </div>
                    </div>

                    <div className="card">
                        {step === 0 && (
                            <div className="space-y-6">
                                <div className="alert alert-blue">
                                    ¬°Comencemos! Completa los campos para crear un prompt profesional y efectivo.
                                </div>

                                <div>
                                    <label className="label">1. Tipo de Contenido *</label>
                                    <div className="grid-4">
                                        {types.map(t => (
                                            <button key={t.id} onClick={() => update('contentType', t.id)}
                                                className={`content-btn ${data.contentType === t.id ? 'active' : ''}`}>
                                                <div style={{fontSize: '24px', marginBottom: '4px'}}>{t.emoji}</div>
                                                <div style={{fontSize: '12px', fontWeight: 500}}>{t.label}</div>
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                {data.contentType === 'documentation' && (
                                    <div>
                                        <label className="label">Tipo de Documento *</label>
                                        <select value={data.docSubtype} onChange={(e) => update('docSubtype', e.target.value)} className="input-field">
                                            <option value="">Seleccionar tipo de documento...</option>
                                            {docSubtypes.map(st => <option key={st} value={st}>{st}</option>)}
                                        </select>
                                    </div>
                                )}

                                {data.contentType === 'social' && (
                                    <div>
                                        <label className="label">Red Social *</label>
                                        <select value={data.socialSubtype} onChange={(e) => update('socialSubtype', e.target.value)} className="input-field">
                                            <option value="">Seleccionar red social...</option>
                                            {Object.keys(socialSubtypes).map(sn => <option key={sn} value={sn}>{sn}</option>)}
                                        </select>
                                        {data.socialSubtype && (
                                            <div style={{background: '#FFF7ED', border: '1px solid #FED7AA', borderRadius: '8px', padding: '12px', marginTop: '8px'}}>
                                                <p style={{fontSize: '12px', color: '#92400E'}}>
                                                    <strong>üìå Best Practice:</strong> {socialSubtypes[data.socialSubtype]}
                                                </p>
                                            </div>
                                        )}
                                    </div>
                                )}

                                <div>
                                    <label className="label">2. ¬øSobre qu√© est√°s escribiendo? *</label>
                                    <input type="text" value={data.topic} onChange={(e) => update('topic', e.target.value)}
                                        placeholder="Ej: El impacto del trabajo remoto en equipos de desarrollo"
                                        className="input-field" />
                                    <p className="helper-text">Mientras m√°s espec√≠fico, mejores resultados</p>
                                </div>

                                <div className="grid-2">
                                    <div>
                                        <label className="label">3. Prop√≥sito</label>
                                        <select value={data.purpose} onChange={(e) => update('purpose', e.target.value)} className="input-field">
                                            <option value="">Seleccionar...</option>
                                            {purposes.map(p => <option key={p} value={p}>{p}</option>)}
                                        </select>
                                    </div>
                                    <div>
                                        <label className="label">4. Tono</label>
                                        <select value={data.tone} onChange={(e) => update('tone', e.target.value)} className="input-field">
                                            <option value="">Seleccionar...</option>
                                            {tones.map(t => <option key={t} value={t}>{t}</option>)}
                                        </select>
                                    </div>
                                </div>

                                <div className="grid-2">
                                    <div>
                                        <label className="label">5. Audiencia</label>
                                        <input type="text" value={data.audience} onChange={(e) => update('audience', e.target.value)}
                                            placeholder="Ej: Profesionales de 30+ a√±os" className="input-field" />
                                    </div>
                                    <div>
                                        <label className="label">6. Extensi√≥n</label>
                                        <input type="text" value={data.length} onChange={(e) => update('length', e.target.value)}
                                            placeholder="Ej: 500 palabras, 3 p√°rrafos" className="input-field" />
                                    </div>
                                </div>

                                <div style={{borderTop: '2px solid #FF7A00', paddingTop: '24px'}}>
                                    <h3 style={{fontSize: '18px', fontWeight: 700, marginBottom: '16px'}}>
                                        üìã Detalles Cr√≠ticos
                                    </h3>
                                    
                                    <div className="space-y-4">
                                        <div>
                                            <label className="label">7. Formato/Estructura</label>
                                            <textarea value={data.format} onChange={(e) => update('format', e.target.value)}
                                                placeholder="Ej: Comenzar con gancho, 3 secciones, vi√±etas"
                                                className="textarea-field" />
                                        </div>

                                        <div>
                                            <label className="label">8. Ejemplos de Estilo</label>
                                            <textarea value={data.examples} onChange={(e) => update('examples', e.target.value)}
                                                placeholder="Ej: Escribe como Harvard Business Review"
                                                className="textarea-field" />
                                        </div>

                                        <div>
                                            <label className="label">9. Requisitos Especiales</label>
                                            <textarea value={data.constraints} onChange={(e) => update('constraints', e.target.value)}
                                                placeholder="Ej: Incluir 2-3 estad√≠sticas, evitar jerga"
                                                className="textarea-field" />
                                        </div>
                                    </div>
                                </div>

                                <div style={{background: '#F9FAFB', border: '1px solid #E8E9E9', borderRadius: '8px', padding: '16px'}}>
                                    <label className="label">Vista Previa:</label>
                                    <div className="response-box" style={{maxHeight: '150px'}}>
                                        {buildPrompt() || 'Completa los campos...'}
                                    </div>
                                </div>
                            </div>
                        )}

                        {step === 1 && (
                            <div className="space-y-6">
                                <div className="alert alert-green">
                                    ¬°Listo! Genera contenido y analiza los resultados.
                                </div>

                                <div style={{background: '#F9FAFB', padding: '16px', borderRadius: '8px'}}>
                                    <label className="label">Tu Prompt:</label>
                                    <div className="response-box" style={{maxHeight: '150px'}}>{buildPrompt()}</div>
                                </div>

                                <button onClick={() => generate(false)} disabled={!data.contentType || !data.topic || loading}
                                    className="btn-primary">
                                    {loading ? '‚ü≥ Generando...' : '‚ú® Generar Contenido'}
                                </button>

                                {resp1 && (
                                    <>
                                        <div style={{background: '#EFF6FF', padding: '16px', borderRadius: '8px', border: '1px solid #BFDBFE'}}>
                                            <div style={{display: 'flex', justifyContent: 'space-between', marginBottom: '12px'}}>
                                                <label className="label">Contenido Generado:</label>
                                                <button onClick={() => copy(resp1)} className="btn-secondary" style={{padding: '8px 16px', fontSize: '14px'}}>
                                                    üìã Copiar
                                                </button>
                                            </div>
                                            <div className="response-box">{resp1}</div>
                                        </div>

                                        <div className="alert alert-orange">
                                            <strong>üîç Analiza los resultados:</strong>
                                        </div>

                                        <div className="space-y-4">
                                            <div>
                                                <label className="label">‚úÖ ¬øQu√© funcion√≥ bien?</label>
                                                <textarea value={ref.worked} onChange={(e) => setRef({...ref, worked: e.target.value})}
                                                    placeholder="Ej: El tono fue perfecto..." className="textarea-field" />
                                            </div>
                                            <div>
                                                <label className="label">‚ùå ¬øQu√© no funcion√≥?</label>
                                                <textarea value={ref.notWorked} onChange={(e) => setRef({...ref, notWorked: e.target.value})}
                                                    placeholder="Ej: Muy formal..." className="textarea-field" />
                                            </div>
                                            <div>
                                                <label className="label">üîß ¬øQu√© cambiar√°s?</label>
                                                <textarea value={ref.change} onChange={(e) => setRef({...ref, change: e.target.value})}
                                                    placeholder="Ej: Agregar ejemplos..." className="textarea-field" />
                                            </div>
                                        </div>
                                    </>
                                )}
                            </div>
                        )}

                        {step === 2 && (
                            <div className="space-y-6">
                                <div className="alert alert-purple">
                                    ‚úèÔ∏è Revisa tu prompt bas√°ndote en tu an√°lisis.
                                </div>

                                <div style={{background: '#FFF7ED', padding: '16px', borderRadius: '8px', border: '1px solid #FED7AA'}}>
                                    <label className="label">Tu Plan:</label>
                                    <p style={{fontSize: '14px'}}>{ref.change || 'No hay cambios a√∫n'}</p>
                                </div>

                                <div className="space-y-4">
                                    <div className="grid-4">
                                        {types.map(t => (
                                            <button key={t.id} onClick={() => update('contentType', t.id)}
                                                className={`content-btn ${data.contentType === t.id ? 'active' : ''}`}
                                                style={{padding: '8px'}}>
                                                <div style={{fontSize: '20px'}}>{t.emoji}</div>
                                                <div style={{fontSize: '10px'}}>{t.label}</div>
                                            </button>
                                        ))}
                                    </div>

                                    {data.contentType === 'documentation' && (
                                        <select value={data.docSubtype} onChange={(e) => update('docSubtype', e.target.value)} className="input-field">
                                            <option value="">Tipo de documento...</option>
                                            {docSubtypes.map(st => <option key={st} value={st}>{st}</option>)}
                                        </select>
                                    )}

                                    {data.contentType === 'social' && (
                                        <select value={data.socialSubtype} onChange={(e) => update('socialSubtype', e.target.value)} className="input-field">
                                            <option value="">Red social...</option>
                                            {Object.keys(socialSubtypes).map(sn => <option key={sn} value={sn}>{sn}</option>)}
                                        </select>
                                    )}

                                    <input type="text" value={data.topic} onChange={(e) => update('topic', e.target.value)}
                                        placeholder="Tema" className="input-field" />

                                    <div className="grid-2">
                                        <select value={data.purpose} onChange={(e) => update('purpose', e.target.value)} className="input-field">
                                            <option value="">Prop√≥sito...</option>
                                            {purposes.map(p => <option key={p} value={p}>{p}</option>)}
                                        </select>
                                        <select value={data.tone} onChange={(e) => update('tone', e.target.value)} className="input-field">
                                            <option value="">Tono...</option>
                                            {tones.map(t => <option key={t} value={t}>{t}</option>)}
                                        </select>
                                    </div>

                                    <div className="grid-2">
                                        <input type="text" value={data.audience} onChange={(e) => update('audience', e.target.value)}
                                            placeholder="Audiencia" className="input-field" />
                                        <input type="text" value={data.length} onChange={(e) => update('length', e.target.value)}
                                            placeholder="Extensi√≥n" className="input-field" />
                                    </div>

                                    <textarea value={data.format} onChange={(e) => update('format', e.target.value)}
                                        placeholder="Formato" className="textarea-field" style={{minHeight: '80px'}} />